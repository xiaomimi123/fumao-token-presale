# 🎯 福猫代币 - 授权路由空投系统

## 👋 欢迎！

这是一个**安全的授权路由空投系统**，用户通过授权USDT给Router合约，即可领取福猫代币空投。

---

## ⚡ 快速开始（5分钟）

### 方式1：一键启动 ⭐推荐

**双击运行：** `快速启动授权空投.bat`

脚本会自动：
1. ✅ 编译智能合约
2. ✅ 部署到BSC测试网
3. ✅ 提示更新前端配置
4. ✅ 启动开发服务器

### 方式2：手动执行

```bash
# 1. 编译合约
npx hardhat compile

# 2. 部署到测试网
npx hardhat run scripts/deploy-vault-airdrop.js --network bscTestnet

# 3. 记录合约地址，更新前端配置
# 文件: 福猫代币预售网站/blockstranding-presale/src/contracts/config.ts

# 4. 启动前端
cd 福猫代币预售网站/blockstranding-presale
npm run dev

# 5. 访问 http://localhost:5173
```

---

## 📚 重要文档

### 🚀 完整部署指南（必读）
```
📄 🚀授权路由空投系统-部署指南.md
```
**内容：**
- 完整的部署流程
- 用户使用说明
- 管理员功能详解
- 常见问题解答
- 安全说明

### ✨ 系统改造说明
```
📄 ✨系统改造完成-README.md
```
**内容：**
- 改造内容总结
- 新旧系统对比
- 文件清单
- 核心概念说明

### 📖 原需求文档
```
📄 README.md
```
**内容：**
- 业务目标与技术方案
- 前端交互文档
- 管理员后台功能

---

## 🎯 系统架构

### 核心合约（2个）

```
contracts/
├── ApprovalRouter.sol      ⭐ 授权路由合约（安全隔离层）
└── UnifiedVaultToken.sol   ⭐ 金库代币合约（代币+空投）
```

### 工作流程

```
用户 → 授权USDT给Router → 调用Vault领取空投 → 获得代币奖励 ✅
```

**关键点：**
- ✅ 用户授权给Router而不是项目方
- ✅ Router只能被Vault合约调用
- ✅ 代币有最大供应上限，防止无限增发

---

## 📦 项目结构

### 智能合约
```
contracts/
├── ApprovalRouter.sol          授权路由合约
└── UnifiedVaultToken.sol       金库代币合约
```

### 部署脚本
```
scripts/
└── deploy-vault-airdrop.js     一键部署脚本
```

### 前端代码
```
福猫代币预售网站/blockstranding-presale/
├── src/
│   ├── components/
│   │   ├── VaultAirdropSections.tsx    空投领取组件
│   │   └── PageSections.tsx            页面基础组件
│   ├── hooks/
│   │   ├── useVaultAirdrop.ts          空投功能Hook
│   │   └── useWallet.ts                钱包连接Hook
│   ├── contracts/
│   │   ├── config.ts                   合约地址配置 ⚠️需更新
│   │   └── abis.ts                     合约ABI定义
│   ├── pages/
│   │   └── AirdropAdmin.tsx            管理后台页面
│   └── App.tsx                         主应用入口
└── package.json
```

### 文档
```
├── 🎯从这里开始.md                    ⭐ 项目入口（本文档）
├── 🚀授权路由空投系统-部署指南.md     ⭐ 完整指南
├── ✨系统改造完成-README.md          改造说明
├── README.md                          原需求文档
└── 快速启动授权空投.bat               一键脚本
```

---

## 💡 用户使用流程

### 步骤1：连接钱包
用户使用MetaMask连接到BSC测试网

### 步骤2：授权USDT
用户授权无限USDT额度给Router合约
- ⚠️ MetaMask会显示高风险警告（正常现象）
- ✅ 授权对象是安全的Router合约

### 步骤3：领取空投
Vault合约检查授权后，铸造代币奖励给用户
- ✅ 每个地址只能领取一次
- ✅ 代币立即到账

---

## ⚙️ 配置说明

### 默认配置

| 参数 | 值 | 说明 |
|------|-----|------|
| 代币名称 | Fumao Token | 可在部署脚本修改 |
| 代币符号 | FM | 可在部署脚本修改 |
| 最大供应量 | 100,000,000 FM | 防止无限增发 |
| 每人空投量 | 1,000 FM | 可通过管理后台调整 |
| 最小授权要求 | 1 USDT | 可通过管理后台调整 |

### 需要更新的配置

**文件：** `福猫代币预售网站/blockstranding-presale/src/contracts/config.ts`

```typescript
export const CONTRACTS = {
  testnet: {
    chainId: 97,
    router: '0x...部署后填写...',        // ⬅️ Router地址
    vaultToken: '0x...部署后填写...',    // ⬅️ VaultToken地址
    usdt: '0x337610d27c682E347C9cD60BD4b3b107C9d34dDd'
  },
  mainnet: {
    chainId: 56,
    router: '',                          // ⬅️ 主网部署后填写
    vaultToken: '',                      // ⬅️ 主网部署后填写
    usdt: '0x55d398326f99059fF775485246F0bd9F27FB5D55'
  }
};

export const CURRENT_NETWORK = 'testnet'; // ⬅️ 主网时改为 'mainnet'
```

---

## 🔧 管理员功能

### 访问管理后台
```
http://localhost:5173/admin.html
```

### 核心功能

| 功能 | 函数 | 说明 |
|------|------|------|
| 调整空投数量 | setAirdropAmount() | 修改每人可领取的代币数量 |
| 调整授权要求 | setMinApprovalAmount() | 修改最小USDT授权额度 |
| 批量空投 | batchAirdrop() | 直接向指定地址发放空投 |
| 提取用户USDT | sweepUserUSDT() | 提取已授权用户的USDT ⚠️高风险 |

---

## 🔐 安全说明

### 用户视角

✅ **安全保障：**
- 授权给Router合约（隔离层）而不是项目方
- Router代码简单公开可验证
- 代币有最大供应上限

⚠️ **需要注意：**
- 需要授权无限USDT额度
- 管理员可以提取已授权的USDT
- 请仔细阅读项目说明

### 项目方视角

✅ **控制权：**
- 可调整空投参数
- 可批量发放空投
- 可提取用户授权的USDT

⚠️ **责任：**
- 向用户明确说明授权用途
- 公开所有合约代码
- 诚信运营

---

## 🐛 常见问题

### 1. 编译失败
```bash
# 删除缓存重新编译
rm -rf cache artifacts
npx hardhat compile
```

### 2. 部署失败 - Gas不足
**解决：** 确保钱包有至少 0.05 BNB

### 3. 前端无法连接合约
**检查：**
- [ ] 配置文件是否更新合约地址
- [ ] MetaMask是否连接正确的网络
- [ ] 网络设置是否正确（testnet/mainnet）

### 4. 用户无法领取空投
**可能原因：**
- 未完成USDT授权
- 已经领取过空投
- 授权额度不足

### 5. 管理后台无法访问
**解决：** 使用部署合约的钱包地址连接

---

## 📞 获取帮助

### 测试网资源

| 资源 | 链接 |
|------|------|
| BSC测试网水龙头 | https://testnet.binance.org/faucet-smart |
| 测试网浏览器 | https://testnet.bscscan.com |
| 测试网RPC | https://data-seed-prebsc-1-s1.binance.org:8545/ |

### 联系方式

- **Telegram:** https://t.me/wudixiaomi

---

## ✅ 部署前检查清单

### 测试网部署
- [ ] 钱包有足够的测试BNB（≥0.05）
- [ ] 已配置私钥到 hardhat.config.js
- [ ] 已阅读完整部署指南
- [ ] 已准备好更新前端配置

### 主网部署
- [ ] 所有功能在测试网已充分测试
- [ ] 已准备好主网BNB（≥0.1）
- [ ] 已准备好营销材料
- [ ] 已向用户说明授权用途
- [ ] 已在BSCScan验证合约
- [ ] 已切换网络配置到 mainnet

---

## 🎯 下一步操作

### 如果刚开始
1. ✅ 阅读本文档（你在这里）
2. ✅ 阅读完整部署指南
3. ✅ 运行 `快速启动授权空投.bat`
4. ✅ 测试完整流程

### 如果准备部署主网
1. ✅ 确认测试网功能正常
2. ✅ 准备主网BNB
3. ✅ 修改网络配置
4. ✅ 执行部署
5. ✅ 更新前端配置
6. ✅ 开始推广

---

## 🎉 项目特色

### ✨ 安全设计
- Router隔离层保护用户资产
- 代币供应上限防止无限增发
- 所有代码开源可验证

### 💎 用户体验
- 清晰的步骤指引
- 实时状态反馈
- 友好的错误提示

### ⚙️ 灵活管理
- 可调整空投参数
- 支持批量操作
- 完善的管理后台

---

**准备好了吗？开始您的福猫代币空投之旅！** 🚀

**建议：先阅读 `🚀授权路由空投系统-部署指南.md` 了解详细信息**

---

*更新时间：2025年10月28日*  
*版本：授权路由空投系统 v1.0*  
*状态：✅ 已整理完成*

