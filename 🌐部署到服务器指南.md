# 🌐 福猫空投网站部署指南

## 📋 部署前准备

### 1. 切换到主网配置

在部署前，需要将合约地址从测试网切换到主网：

**文件位置**: `福猫代币预售网站/blockstranding-presale/src/contracts/config.ts`

```typescript
// 修改这一行
export const CURRENT_NETWORK = 'mainnet'; // 从 'testnet' 改为 'mainnet'

// 并填写主网合约地址
export const CONTRACTS = {
  mainnet: {
    chainId: 56,
    router: '0x你的主网Router地址',      // ← 填写部署后的地址
    vaultToken: '0x你的主网Vault地址',   // ← 填写部署后的地址
    usdt: '0x55d398326f99059fF775485246F0bd9F27FB5D55' // BSC主网USDT
  }
};
```

---

## 🚀 方案一：使用 Vercel（推荐，免费且简单）

### 优点
- ✅ 完全免费
- ✅ 自动 HTTPS
- ✅ 全球 CDN 加速
- ✅ 自动部署（Git 推送即部署）
- ✅ 支持自定义域名

### 部署步骤

#### 1. 构建项目

```bash
cd 福猫代币预售网站/blockstranding-presale
npm run build
```

构建完成后，会生成 `dist` 文件夹。

#### 2. 注册 Vercel 账号

访问：https://vercel.com
- 使用 GitHub/GitLab/Bitbucket 账号登录

#### 3. 部署方式A：通过 Git（推荐）

**步骤：**

1. 将项目推送到 GitHub
```bash
# 在项目根目录
git init
git add .
git commit -m "Initial commit"
git remote add origin https://github.com/你的用户名/fumao-airdrop.git
git push -u origin main
```

2. 在 Vercel 导入项目
   - 点击 "New Project"
   - 导入你的 GitHub 仓库
   - 框架预设选择 "Vite"
   - Root Directory 设置为 `福猫代币预售网站/blockstranding-presale`
   - 点击 "Deploy"

3. 等待部署完成
   - Vercel 会自动分配一个域名（如 `fumao-airdrop.vercel.app`）

#### 4. 部署方式B：直接上传（简单快速）

**使用 Vercel CLI：**

```bash
# 1. 安装 Vercel CLI
npm install -g vercel

# 2. 进入构建目录
cd 福猫代币预售网站/blockstranding-presale

# 3. 登录 Vercel
vercel login

# 4. 部署
vercel --prod
```

按提示操作：
- Set up and deploy? **Y**
- Which scope? 选择你的账号
- Link to existing project? **N**
- Project name? **fumao-airdrop**
- Directory? **./dist**

#### 5. 绑定自定义域名

在 Vercel 项目设置中：
1. 进入 "Settings" → "Domains"
2. 添加你的域名（如 `airdrop.fumao.com`）
3. 按提示在域名服务商添加 DNS 记录：
   - 类型：`CNAME`
   - 名称：`airdrop` 或 `@`
   - 值：`cname.vercel-dns.com`
4. 等待 DNS 生效（5-30分钟）

---

## 🌟 方案二：使用 Netlify（免费，功能强大）

### 优点
- ✅ 完全免费
- ✅ 自动 HTTPS
- ✅ 表单处理功能
- ✅ 一键回滚
- ✅ 支持自定义域名

### 部署步骤

#### 1. 构建项目

```bash
cd 福猫代币预售网站/blockstranding-presale
npm run build
```

#### 2. 注册 Netlify 账号

访问：https://www.netlify.com
- 使用 GitHub/GitLab/Bitbucket 账号登录

#### 3. 部署方式A：拖拽部署（最简单）

1. 登录 Netlify
2. 点击 "Sites" → "Add new site" → "Deploy manually"
3. 拖拽 `dist` 文件夹到上传区域
4. 等待部署完成

#### 4. 部署方式B：通过 Git

1. 连接 GitHub 仓库
2. 设置构建命令：
   - Build command: `npm run build`
   - Publish directory: `dist`
   - Base directory: `福猫代币预售网站/blockstranding-presale`
3. 点击 "Deploy site"

#### 5. 绑定自定义域名

1. 进入项目 "Domain settings"
2. 点击 "Add custom domain"
3. 输入域名并验证
4. 添加 DNS 记录：
   - 类型：`A` 或 `CNAME`
   - 按 Netlify 提示配置

---

## 🔧 方案三：使用传统服务器（VPS/云服务器）

### 适用于
- 需要更多控制权
- 已有服务器
- 需要自定义服务器配置

### 部署步骤

#### 1. 购买服务器

推荐服务商：
- 阿里云
- 腾讯云
- Vultr
- DigitalOcean

最低配置：
- 1核 1GB 内存
- Ubuntu 20.04 或更高

#### 2. 安装 Nginx

```bash
# 连接到服务器
ssh root@你的服务器IP

# 更新系统
apt update && apt upgrade -y

# 安装 Nginx
apt install nginx -y

# 启动 Nginx
systemctl start nginx
systemctl enable nginx
```

#### 3. 构建并上传项目

**本地构建：**
```bash
cd 福猫代币预售网站/blockstranding-presale
npm run build
```

**上传到服务器：**
```bash
# 方式1：使用 scp
scp -r dist/* root@你的服务器IP:/var/www/fumao

# 方式2：使用 FTP 工具
# 使用 FileZilla 或 WinSCP 上传 dist 文件夹内容
```

#### 4. 配置 Nginx

```bash
# 创建配置文件
nano /etc/nginx/sites-available/fumao
```

添加以下内容：

```nginx
server {
    listen 80;
    server_name airdrop.fumao.com;  # 你的域名
    
    root /var/www/fumao;
    index index.html;
    
    # 支持单页应用路由
    location / {
        try_files $uri $uri/ /index.html;
    }
    
    # 静态文件缓存
    location ~* \.(js|css|png|jpg|jpeg|gif|ico|svg)$ {
        expires 1y;
        add_header Cache-Control "public, immutable";
    }
    
    # Gzip 压缩
    gzip on;
    gzip_types text/plain text/css application/json application/javascript text/xml application/xml application/xml+rss text/javascript;
}
```

启用配置：

```bash
# 创建软链接
ln -s /etc/nginx/sites-available/fumao /etc/nginx/sites-enabled/

# 测试配置
nginx -t

# 重启 Nginx
systemctl restart nginx
```

#### 5. 配置 HTTPS（使用 Let's Encrypt）

```bash
# 安装 Certbot
apt install certbot python3-certbot-nginx -y

# 获取证书
certbot --nginx -d airdrop.fumao.com

# 自动续期
certbot renew --dry-run
```

#### 6. 配置域名 DNS

在域名服务商（如阿里云、Cloudflare）添加 DNS 记录：

```
类型: A
名称: airdrop (或 @)
值: 你的服务器IP
TTL: 600
```

---

## 📱 方案四：使用 GitHub Pages（免费）

### 限制
- 仅适用于静态网站
- 不支持服务器端功能
- 需要 GitHub 账号

### 部署步骤

#### 1. 修改配置

在 `vite.config.ts` 中添加 base 路径：

```typescript
export default defineConfig({
  base: '/fumao-airdrop/', // 仓库名称
  // ... 其他配置
})
```

#### 2. 构建并部署

```bash
cd 福猫代币预售网站/blockstranding-presale

# 构建
npm run build

# 创建 .nojekyll 文件（防止 Jekyll 处理）
touch dist/.nojekyll

# 部署到 GitHub Pages
# 方式1：使用 gh-pages 包
npm install -D gh-pages
npx gh-pages -d dist

# 方式2：手动推送
cd dist
git init
git add -A
git commit -m 'Deploy'
git push -f https://github.com/你的用户名/fumao-airdrop.git main:gh-pages
```

#### 3. 启用 GitHub Pages

1. 进入 GitHub 仓库设置
2. 找到 "Pages" 设置
3. Source 选择 `gh-pages` 分支
4. 点击 Save

访问地址：`https://你的用户名.github.io/fumao-airdrop/`

#### 4. 绑定自定义域名

1. 在仓库根目录添加 `CNAME` 文件，内容为你的域名
2. 在域名服务商添加 CNAME 记录指向 `你的用户名.github.io`

---

## 🎯 推荐部署方案对比

| 方案 | 难度 | 费用 | 速度 | HTTPS | CDN | 推荐度 |
|------|------|------|------|-------|-----|--------|
| **Vercel** | ⭐ | 免费 | 极快 | 自动 | ✅ | ⭐⭐⭐⭐⭐ |
| **Netlify** | ⭐ | 免费 | 快 | 自动 | ✅ | ⭐⭐⭐⭐⭐ |
| **VPS/云服务器** | ⭐⭐⭐ | 付费 | 中等 | 需配置 | ❌ | ⭐⭐⭐ |
| **GitHub Pages** | ⭐⭐ | 免费 | 快 | 自动 | ✅ | ⭐⭐⭐⭐ |

**新手推荐**: Vercel（最简单，功能最强）

---

## ✅ 部署后检查清单

部署完成后，请验证以下功能：

### 基础功能
- [ ] 网站可以正常打开
- [ ] 页面样式显示正常
- [ ] 图片和图标加载正常

### 钱包功能
- [ ] 可以连接 MetaMask
- [ ] 网络切换功能正常
- [ ] 显示正确的链 ID (56 - BSC 主网)

### 空投功能
- [ ] 可以授权 USDT
- [ ] 可以领取空投
- [ ] 交易成功后状态更新

### 管理员功能
- [ ] `/admin` 路径可以访问
- [ ] 只有所有者可以进入
- [ ] 管理功能正常工作

---

## 🔒 安全建议

### 1. 环境变量管理
不要在代码中硬编码敏感信息：

```typescript
// ❌ 不要这样
const ADMIN_KEY = "0xabcd...";

// ✅ 使用环境变量
const ADMIN_KEY = import.meta.env.VITE_ADMIN_KEY;
```

### 2. 合约地址验证
在前端显示合约地址，让用户可以验证：

```typescript
console.log('Router 合约:', CONTRACTS.mainnet.router);
console.log('Vault 合约:', CONTRACTS.mainnet.vaultToken);
```

### 3. 限制管理员访问
管理后台只允许合约所有者访问（已实现）。

### 4. HTTPS 强制
确保网站使用 HTTPS，保护用户数据。

---

## 📊 性能优化建议

### 1. 启用 CDN
- Vercel/Netlify 自动提供 CDN
- 自建服务器可使用 Cloudflare

### 2. 图片优化
```bash
# 压缩图片
npm install -g imagemin-cli
imagemin public/avatars/* --out-dir=public/avatars/
```

### 3. 代码分割
Vite 已自动处理，无需额外配置。

### 4. 浏览器缓存
在 Nginx 配置中已包含缓存设置。

---

## 🆘 常见问题

### Q1: 部署后白屏/404 错误？
**A**: 检查 `vite.config.ts` 中的 `base` 配置是否正确。

### Q2: 合约调用失败？
**A**: 确认已切换到主网配置，合约地址正确。

### Q3: 域名不生效？
**A**: DNS 生效需要 5-30 分钟，耐心等待。

### Q4: 构建失败？
**A**: 删除 `node_modules` 和 `package-lock.json`，重新安装依赖。

---

## 📞 需要帮助？

如遇到部署问题：

1. 检查浏览器控制台错误信息
2. 查看服务器日志
3. 确认网络和合约配置
4. 联系技术支持

---

## 🎉 部署完成后

恭喜！您的福猫空投网站已成功上线！

**下一步：**
1. ✅ 在社交媒体分享网站链接
2. ✅ 测试所有功能是否正常
3. ✅ 监控合约和网站状态
4. ✅ 准备营销推广

**网站地址示例：**
- Vercel: `https://fumao-airdrop.vercel.app`
- 自定义域名: `https://airdrop.fumao.com`

---

**部署时间**: 2025-01-28  
**版本**: v1.0  
**网络**: BSC Mainnet

